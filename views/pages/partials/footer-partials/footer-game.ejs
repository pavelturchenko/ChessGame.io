<script src="/js/nativeScript.js"></script>
<script type="text/javascript">
    var socket = io();
    var personID = getCookie("personID"),
        colorPlayer = "",
        room = "";
    socket.emit('connectToGameRoom', personID);
    socket.on('connectToGameRoom', function (creatorId, personId, roomNumber){
        room = roomNumber;
        if (colorPlayer !== '') {
            return false
        } else {
            if(personID === personId || personID === creatorId){
                colorPlayer = 'black';
            }
            if (personID === creatorId) {
                colorPlayer = 'white';
            }
            var newGame = new __games(colorPlayer);
        }
    });
    socket.on('stepToGo', function(cordsArray){
        console.log(cordsArray)
        var corXParent = Number(cordsArray[0]),
            corYParent = Number(cordsArray[1]),
            corXChild = Number(cordsArray[2]),
            corYChild = Number(cordsArray[3]),
            target = document.querySelector('[data-y="'+  corYParent +'"] > td[data-x="'+  corXParent +'"]'),
            elem = document.querySelector('[data-y="'+  corYChild +'"] > td[data-x="'+  corXChild +'"] > span');
        target.appendChild(elem);
    });

    function getCookie(name) {
        var matches = document.cookie.match(new RegExp(
            "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
        ));
        return matches ? decodeURIComponent(matches[1]) : undefined;
    }
</script>
